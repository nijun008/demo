<!DOCTYPE html>
<html>
<head>
  <title>数组方法</title>
</head>
<body>
  <script type="text/javascript">
    // from()方法从一个类似数组或可迭代对象创建一个新的，浅拷贝的数组实例
    console.log(Array.from('script'))

    console.log(Array.from([1,2,3,4,5], x => x * 2))

    // isArray() 方法用于确定传递的值是否是一个 Array
    console.log(Array.isArray([1, 2, 3]))

    console.log(Array.isArray('5125'))

    console.log(Array.isArray({a: 2}))

    console.log(Array.isArray())

    // includes() 方法用来判断一个数组是否包含一个指定的值
    var arr = [1, 2, 3]

    console.log(arr.includes(2))

    console.log(arr.includes(5))

    // some() 方法测试数组中是不是有元素通过了被提供的函数测试
    console.log(arr.some(x => x ===1))
    console.log(arr.some(x => x ===100))

    // every() 方法测试一个数组内的所有元素是否都能通过某个指定函数的测试
    console.log(arr.every(x => typeof x === 'number'))

    // 取数组最大值
    let arr1 = [
      { age: 2, name: '张5' },
      { age: null, name: '张8' },
      { name: '张1' },
      { age: 7, name: '张2' },
      { age: 4, name: '张5' },
      { age: 16, name: '张1' },
    ]

    let max = Math.max(...arr1.filter(item => item.age).map(item => item.age))
    console.log(max)


    // 数组扁平化
    let arr2 = [[[1,2], 4,],6]
    let arr3 = arr2.flat(4)
    
    let arr4 = [
      { name: 'name',
        id: '571ll25l1',
        children: [
          {
            name: 'name-1',
            id: 'k221jlk1j5',
          },
          {
            name: 'name-2',
            id: 'k215112k1j5',
            children: [
              {
                name: 'name-2-1',
                id: '12lklj5l1k21'
              }
            ]
          }
        ]
      },
      {
        name: 'name2',
        id: '2klj51l'
      }
    ]
    
    function myFlat(arr, result = [], children = 'children') {
      arr.reduce((acc, cur) => {
        result.push(cur)
        cur[children] && cur[children].length > 0 && myFlat(cur[children], result)
      }, result)
      return result
    }

    let arr5 = myFlat(arr4)

    console.log(arr5)
  </script>
</body>
</html>