<!DOCTYPE html>
<html>
<head>
  <title>函数防抖和节流</title>
</head>
<body>
<script type="text/javascript">
  window.onload = function () {
    // 防抖
    window.onresize = debounce(resizeFn, 1000)

    // 节流
    window.onmousemove = throttle(mouseMoveFn, 1000)
  }


  /*
    防抖
  */
  function debounce (fn, time = 300) {
    let timer = null
    return function (...rest) {
      if (timer) clearTimeout(timer)
      timer = setTimeout(() => {
        fn(...rest)
      }, time)
    }
  }

  function resizeFn (event) {
    console.log(event)
    console.log('resize')
  }


  /*
    节流
  */
  function throttle (fn, time = 300) {
    let timer = null
    return function (...rest) {
      if (!timer) {
        fn(...rest)
        timer = setTimeout( () => {
          timer = null
        }, time)
      }
    }
  }

  function mouseMoveFn(event) {
    console.log(event)
    console.log('mouseMove')
  }
</script>
</body>
</html>